...existing code...
# 3 — Priority Table（优先级表）

目录
- [概述](#概述)
- [总体计划与假设](#总体计划与假设)
- [阶段与优先级总览](#阶段与优先级总览)
- [优先级详细表](#优先级详细表)
  - [核心阶段（第1–3周，MVP）](#核心阶段第1-3周-mvp)
  - [增强阶段（第4周）](#增强阶段第4周)
  - [高级阶段（第5周）](#高级阶段第5周)
- [实施建议与验收准则](#实施建议与验收准则)
- [风险汇总与缓解措施](#风险汇总与缓解措施)
- [任务拆分（示例）](#任务拆分示例)
- [里程碑（Milestones）](#里程碑milestones)
- [导出：Trello/Jira CSV 示例](#export-trello-jira-csv)

## 概述
本文件基于 docs/1_architecture_blueprint.md 与相关设计文档，将热钱包开发路线按优先级表格化。每项任务包含目标、估时、责任人、依赖与主要风险，便于计划与执行。

## 总体计划与假设
- 目标：约 5 周完成从 MVP 到基础增强功能的交付（分阶段迭代）。  
- 团队与角色：主开发（你）、算法/架构顾问（Grok）、测试/自动化（GPT-5 或 CI）。  
- 技术栈建议：Rust（首选），依赖库示例：zeroize、aes-gcm、argon2、liboqs、serde、reqwest、hex、anyhow 等。

## 阶段与优先级总览
- 核心阶段（第1–3周，MVP）：密钥派生（KDF）、助记词分片（Shamir）、HSM 模拟、端到端加密、多签与基础交易功能。  
- 增强阶段（第4周）：量子安全集成、动态密钥轮换、DID 支持、分布式备份。  
- 高级阶段（第5周）：备份恢复验证、日志审计、行为分析、合约审计与监控。

## 优先级详细表

### 核心阶段第1-3周 (MVP)
| 序号 | 模块 | 目标 | 估时 | 责任 | 依赖 | 主要风险 |
|---:|---|---|---:|---|---|---|
| 1 | KDF（密钥派生） | 从助记词/密码派生安全种子与会话密钥 | 3 天 | 主开发 | 无 | 参数配置错误导致安全或性能问题 |
| 2 | 助记词分片（Shamir） | BIP-39 助记词分片与恢复（示例 2-of-3） | 4 天 | 主开发 | KDF | 恢复流程复杂导致 UX 问题 |
| 3 | HSM（或软件模拟） | 提供密钥隔离接口与模拟实现 | 4 天 | 主开发 | KDF | 模拟 HSM 与真实 HSM 行为差异 |
| 4 | 端到端加密 | 敏感数据与传输使用 AES-256-GCM | 3 天 | 主开发 | KDF/HSM | 密钥管理漏洞或兼容性问题 |
| 5 | 多重签名 | 实现 2-of-3 多签交易流程 | 3 天 | 主开发 | KDF/HSM | UX/事务协调复杂 |
| 6 | 基础交易与网络 | 构建发送原始交易（RLP/eth_sendRawTransaction） | 3 天 | 主开发 | 节点/Infura | 串行化/签名不匹配导致拒绝 |

### 增强阶段（第4周）
| 序号 | 模块 | 目标 | 估时 | 责任 | 依赖 | 主要风险 |
|---:|---|---|---:|---|---|---|
| 7 | 量子安全 | 集成 liboqs（Kyber/Dilithium）作为选项 | 3 天 | 主开发 | KDF/HSM | 性能开销大 |
| 8 | 动态密钥轮换 | 周期或事件驱动的密钥轮换机制 | 2 天 | 主开发 | HSM | 轮换失败导致服务中断 |
| 9 | 去中心化身份（DID） | 支持 W3C DID 标准的身份管理 | 3 天 | 主开发 | 密钥管理 | 标准碎片化导致兼容问题 |
| 10 | 分布式存储 | 备份到 IPFS/Arweave（加密后） | 2 天 | 主开发 | 加密 | 节点不可用导致恢复问题 |

### 高级阶段（第5周）
| 序号 | 模块 | 目标 | 估时 | 责任 | 依赖 | 主要风险 |
|---:|---|---|---:|---|---|---|
| 11 | 备份与恢复 | 自动备份策略与恢复演练 | 2 天 | 主开发 | 分片/分布式存储 | 备份失效或恢复失败 |
| 12 | 日志审计 | 加密日志与可验证审计记录 | 2 天 | 主开发 | 分布式存储 | 日志泄露隐私或未能防篡改 |
| 13 | 行为分析 | 异常检测（规则或 ML） | 2 天 | 主开发 | 日志 | 误报/漏报 |
| 14 | 智能合约审计 | 集成静态分析工具（示例 Slither） | 2 天 | 主开发 | 合约部署 | 覆盖不足导致漏洞 |
| 15 | 可升级合约 | 代理模式与回滚策略 | 2 天 | 主开发 | 合约审计 | 升级引入新漏洞 |
| 16 | 威胁情报 | CVE 攻击来源整合与规则更新 | 2 天 | 主开发 | 日志/监控 | 情报延迟或误报 |
| 17 | 实时监控 | 交易与行为实时告警阻断 | 2 天 | 主开发 | 行为分析/日志 | 阻断误伤正常交易 |

## 实施建议与验收准则
- 每日短会、每周集成与回归测试。  
- 验收点：  
  - 核心阶段末：MVP 能创建钱包、签名并在测试链上发送交易。  
  - 增强阶段末：量子安全选项集成且性能可接受。  
  - 高级阶段末：自动备份与恢复演练通过、审计与监控正常告警。

## 风险汇总与缓解措施
- 主要风险：KDF 参数配置、HSM 兼容、量子算法性能、用户 UX、审计覆盖不足、监控误报。  
- 缓解策略：优先使用成熟库、软 HSM 做为过渡、保留回滚机制、强制 TDD、自动化 CI 覆盖关键路径。

## 任务拆分示例（可转为任务卡）
下面为核心阶段每项模块的细化子任务示例，包含简介、估时（小时）、验收准则。

### KDF（密钥派生）
- a) 参数评审与选型 — 4h — 验收：文档确认 Argon2/参数。  
- b) Rust 封装实现（API） — 12h — 验收：单元测试通过、bench 基准。  
- c) 性能基准与配置建议 — 8h — 验收：给出至少 3 套参数（高安全/折中/高性能）。

### 助记词分片（Shamir）
- a) 集成 BIP-39 并生成示例 — 4h — 验收：生成/恢复示例。  
- b) 实现分片 API（encode/decode） — 8h — 验收：2-of-3 恢复成功。  
- c) 恢复 UX 脚本化测试 — 4h — 验收：模拟 3 次恢复成功。

### HSM 模拟
- a) 定义软 HSM trait 接口 — 4h — 验收：接口文档。  
- b) 实现文件/内存模拟器 — 10h — 验收：密钥不可导出测试。  
- c) 集成至签名流程并测试 — 6h — 验收：签名验证通过。

### 端到端加密（AES-256-GCM）
- a) 设计兼容策略 — 2h — 验收：方案文档。  
- b) 实现 encrypt/decrypt 接口并测试 — 6h — 验收：对称加密示例通过。

### 多重签名
- a) 设计多签数据结构与流程 — 4h — 验收：流程图与接口。  
- b) 实现 2-of-3 本地签名模拟 — 10h — 验收：测试链交易通过。

## 里程碑（Milestones）
- M1（第2周末）：KDF、助记词分片、HSM 模拟最小实现（单元测试通过）。  
- M2（第3周末）：端到端加密 + 多签集成，完成一次测试链交易发送。  
- M3（第4周末）：量子安全模块集成并完成性能基线。  
- M4（第5周末）：备份/恢复、日志与监控功能到位并验证恢复流程。

<!-- 显式锚点，确保目录跳转正常 -->
<a name="export-trello-jira-csv"></a>
## 导出：Trello/Jira CSV 示例（可直接导入）
标题,描述,优先级,估时(小时),阶段,标签,验收标准  
"KDF: 参数评审","选型 Argon2 并确认参数","High",4,"核心","KDF","参数文档提交"  
"KDF: 实现 API","实现并测试 KDF 封装","High",12,"核心","KDF","单元测试通过"  
"Shamir: 集成","集成 BIP-39 与分片库","High",4,"核心","Backup","恢复用例通过"  
"HSM: 设计接口","定义软 HSM trait 和安全要求","High",4,"核心","HSM","接口文档"
...existing code...