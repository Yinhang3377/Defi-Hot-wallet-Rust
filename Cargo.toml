[package]
name = "hot_wallet"
version = "0.1.0"
edition = "2021"

[features]
# 可选的内存锁定功能：启用后会尝试在支持的平台锁定敏感数据所在内存页，防止被交换/转储。
# 默认关闭，需要显式 --features memlock
# 说明：
# - Unix 平台使用 libc::mlock
# - Windows 平台使用 windows crate 的 VirtualLock
# 通过 target-specific 依赖减少在不相关平台上编译 windows 生态子 crates（避免 windows-future 等错误）。
memlock = ["libc", "windows-sys-mem"]

[dependencies]
# --- 核心依赖说明 ---
# aes-gcm：对称加密算法（AES-GCM），用于钱包数据加密
# secp256k1：椭圆曲线加密算法，区块链私钥/签名
# thiserror：简洁的错误处理库
# log：标准日志接口
# env_logger：环境变量驱动的日志实现
# serde：序列化/反序列化，含 derive 特性
# zeroize：内存敏感数据自动清零，防止泄露
# rand：安全随机数生成
aes-gcm = "0.10.3" # 保持最新
secp256k1 = { version = "0.29.0" } # 使用外部随机数生成
thiserror = "1.0.63"
log = "0.4.22"
env_logger = "0.11.5"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0" # 添加缺失的依赖
zeroize = "1.8.1" # 保持最新
rand = "0.8.5" # 保持最新
hex = "0.4.3"
clap = { version = "4.5", features = ["derive"] }
argon2 = { version = "0.6.0-rc.1" }
base64 = "0.22"
libc = { version = "0.2", optional = true }
# 为避免拉入 windows-future 可选层，使用精简特性别名，或使用 windows crate 仍保留可选。
windows = { version = "0.58", features = ["Win32_System_Memory"], optional = true, package = "windows" }

[target.'cfg(target_os = "windows")'.dependencies]
# 将 memlock feature 下对 windows 的引用映射为一个内部虚拟特性名（windows-sys-mem）
windows-sys-mem = { package = "windows", version = "0.58", features = ["Win32_System_Memory"], optional = true }

[target.'cfg(unix)'.dependencies]
libc = { version = "0.2", optional = true }

[profile.release]
debug = true
